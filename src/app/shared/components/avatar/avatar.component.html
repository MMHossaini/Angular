<div *ngIf="user$ | async as user else loggedOut">
    <button mat-icon-button [matMenuTriggerFor]="avatar" [matTooltip]="user.email">
        <mat-icon>account_circle</mat-icon>
    </button>

    <mat-menu #avatar="matMenu">
        <button mat-menu-item (click)="goToProfile()">Proifile</button>
        <button mat-menu-item (click)="logOut()">Log out</button>
    </mat-menu>

</div>

<ng-template #loggedOut>
    <a mat-raised-button routerLink="/login">Login</a>
</ng-template>